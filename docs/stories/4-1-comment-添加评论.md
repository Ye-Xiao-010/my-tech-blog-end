# 添加评论 - 故事4.1

## 状态

- **当前状态**: ready-for-dev
- **上下文文件**: 4-1-comment-添加评论.context.xml

## 概述

作为已登录用户，我希望能够对文章添加评论，以便与作者和其他读者互动。

## 验收标准

| 编号 | 验收标准 |
|------|----------|
| 1    | 已登录用户可以在文章详情页看到评论区和评论输入框 |
| 2    | 用户可以输入评论内容并提交 |
| 3    | 评论应该在2秒内发布 |
| 4    | 新评论应该显示在评论列表中 |

## 任务列表

### 后端任务
1. [ ] 创建评论实体类和数据库表
2. [ ] 实现评论Repository接口
3. [ ] 创建评论Service和ServiceImpl
4. [ ] 实现评论Controller和API端点
5. [ ] 添加评论相关的业务逻辑
6. [ ] 编写单元测试和集成测试

### 前端任务
1. [ ] 创建评论组件
2. [ ] 实现评论表单和提交功能
3. [ ] 显示评论列表
4. [ ] 添加成功/错误提示
5. [ ] 编写前端测试

## 技术要求

- **后端**: Spring Boot, Spring Security, JPA
- **前端**: Vue 3, Axios
- **数据库**: MySQL

## 依赖关系

- 故事1.2（用户登录）
- 故事2.1（创建文章）

## 开发注意事项

1. 评论必须关联到具体文章和用户
2. 评论内容不能为空
3. 评论发布时间应该自动生成
4. 输入验证必须同时在前端和后端进行
5. 错误信息必须清晰明确

## 测试策略

1. **单元测试**: 测试评论Service、Repository和Controller
2. **集成测试**: 测试完整的评论添加流程
3. **前端测试**: 测试评论表单、提交功能和列表显示

## 预期交付物

1. 后端API端点：`POST /api/comments`
2. 前端评论组件：用于显示和添加评论
3. 相关测试用例
4. 文档更新

## 变更日志

| 日期 | 变更描述 | 作者 |
|------|----------|------|
| 2025-11-30 | 初始创建 | SM |