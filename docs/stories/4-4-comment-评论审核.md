# 评论审核 - 故事4.4

## 状态

- **当前状态**: ready-for-dev
- **上下文文件**: 4-4-comment-评论审核.context.xml

## 概述

作为管理员，我希望能够审核新用户的评论，以便防止垃圾邮件和不当内容。

## 验收标准

| 编号 | 验收标准 |
|------|----------|
| 1    | 新用户发布的评论应该进入审核队列 |
| 2    | 管理员在管理后台可以看到待审核的评论 |
| 3    | 管理员可以批准或拒绝评论 |
| 4    | 只有批准的评论才会显示在文章页面 |

## 任务列表

### 后端任务
1. [ ] 扩展评论实体类，添加审核状态字段
2. [ ] 实现评论审核业务逻辑
3. [ ] 添加审核状态管理API端点
4. [ ] 实现新用户评论自动进入审核队列的逻辑
5. [ ] 编写单元测试和集成测试

### 前端任务
1. [ ] 在管理后台实现评论审核页面
2. [ ] 显示待审核评论列表
3. [ ] 实现批准和拒绝评论的功能
4. [ ] 实现评论审核状态的更新反馈
5. [ ] 编写前端测试

## 技术要求

- **后端**: Spring Boot, Spring Security, JPA
- **前端**: Vue 3, Axios
- **数据库**: MySQL

## 依赖关系

- 故事4.1（添加评论）
- 故事6.2（内容管理）

## 开发注意事项

1. 只有新用户（注册时间小于7天或评论数少于5条）的评论需要审核
2. 审核状态应该包括：待审核、已批准、已拒绝
3. 管理员可以查看所有状态的评论
4. 只有已批准的评论才会显示在文章页面
5. 评论审核操作应该记录日志

## 测试策略

1. **单元测试**: 测试评论审核业务逻辑
2. **集成测试**: 测试完整的评论审核流程
3. **前端测试**: 测试管理后台评论审核功能

## 预期交付物

1. 后端API端点：`GET /api/admin/comments/pending`, `PUT /api/admin/comments/{id}/approve`, `PUT /api/admin/comments/{id}/reject`
2. 前端管理后台评论审核页面
3. 相关测试用例
4. 文档更新

## 变更日志

| 日期 | 变更描述 | 作者 |
|------|----------|------|
| 2025-11-30 | 初始创建 | SM |