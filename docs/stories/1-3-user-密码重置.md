# 密码重置 - 故事1.3

## 状态

- **当前状态**: completed
- **上下文文件**: 1-3-user-密码重置.context.xml

## 概述

作为忘记密码的用户，我希望能够重置我的密码，以便重新访问我的账号。

## 验收标准

| 编号 | 验收标准 |
|------|----------|
| 1    | 用户点击"忘记密码"并输入电子邮件后，应该收到密码重置链接 |
| 2    | 重置链接应该在1小时内过期 |
| 3    | 使用重置链接应该能够设置新密码 |
| 4    | 密码重置过程应该在2秒内完成 |
| 5    | 密码重置成功后，用户应该能够使用新密码登录 |

## 任务列表

### 后端任务
1. [x] 创建密码重置请求API端点
2. [x] 实现一次性密码重置令牌生成和验证
3. [x] 实现电子邮件发送功能，包含密码重置链接
4. [x] 创建密码重置确认API端点
5. [x] 实现密码重置逻辑，更新用户密码
6. [ ] 编写单元测试和集成测试

### 前端任务
1. [x] 创建忘记密码页面组件
2. [x] 创建密码重置页面组件
3. [x] 实现忘记密码表单验证和提交
4. [x] 实现密码重置表单验证和提交
5. [x] 添加成功/错误提示
6. [ ] 编写前端测试

## 技术要求

- **后端**: Spring Boot, Spring Security, JPA, bcrypt, Spring Mail
- **前端**: Vue 3, VeeValidate（表单验证）
- **数据库**: MySQL

## 依赖关系

- 前置依赖：故事1.1（用户注册）

## 开发注意事项

1. 密码重置令牌必须是安全的一次性令牌，有效期为1小时
2. 密码重置链接必须包含令牌，并且只能使用一次
3. 密码重置后，所有现有会话必须失效
4. 新密码必须满足强度要求（8+字符，包含大写字母、数字和特殊字符）
5. 电子邮件内容必须清晰明确，包含重置链接和有效期
6. 所有密码重置相关操作必须使用HTTPS

## 测试策略

1. **单元测试**: 测试令牌生成、验证、密码重置逻辑
2. **集成测试**: 测试完整的密码重置流程
3. **前端测试**: 测试忘记密码和密码重置表单
4. **安全测试**: 测试令牌安全性、链接有效期

## 预期交付物

1. 后端API端点：
   - `POST /api/auth/forgot-password`
   - `POST /api/auth/reset-password`
2. 前端页面：
   - `/forgot-password`
   - `/reset-password/:token`
3. 相关测试用例
4. 文档更新

## 变更日志

| 日期 | 变更描述 | 作者 |
|------|----------|------|
| 2025-11-28 | 初始创建 | SM |