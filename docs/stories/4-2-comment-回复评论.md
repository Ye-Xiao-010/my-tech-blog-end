# 回复评论 - 故事4.2

## 状态

- **当前状态**: ready-for-dev
- **上下文文件**: 4-2-comment-回复评论.context.xml

## 概述

作为已登录用户，我希望能够回复其他用户的评论，以便进行更深入的讨论。

## 验收标准

| 编号 | 验收标准 |
|------|----------|
| 1    | 已登录用户可以看到每条评论的回复按钮 |
| 2    | 点击回复按钮应该打开回复输入框 |
| 3    | 回复应该显示为嵌套结构 |
| 4    | 回复应该在2秒内发布 |

## 任务列表

### 后端任务
1. [ ] 扩展评论实体类，支持回复功能
2. [ ] 更新评论Repository接口，支持查询回复
3. [ ] 实现回复评论的业务逻辑
4. [ ] 更新评论API端点，支持回复功能
5. [ ] 编写单元测试和集成测试

### 前端任务
1. [ ] 实现评论回复UI，包括回复按钮和输入框
2. [ ] 实现回复提交功能
3. [ ] 显示嵌套的回复结构
4. [ ] 添加成功/错误提示
5. [ ] 编写前端测试

## 技术要求

- **后端**: Spring Boot, Spring Security, JPA
- **前端**: Vue 3, Axios
- **数据库**: MySQL

## 依赖关系

- 故事4.1（添加评论）

## 开发注意事项

1. 评论回复应该支持多级嵌套
2. 回复应该显示被回复用户的信息
3. 回复输入框应该自动聚焦
4. 输入验证必须同时在前端和后端进行
5. 错误信息必须清晰明确

## 测试策略

1. **单元测试**: 测试回复评论的业务逻辑
2. **集成测试**: 测试完整的回复评论流程
3. **前端测试**: 测试回复UI、提交功能和嵌套显示

## 预期交付物

1. 后端API端点：`POST /api/comments/{id}/replies`
2. 前端评论回复功能：支持嵌套显示和提交
3. 相关测试用例
4. 文档更新

## 变更日志

| 日期 | 变更描述 | 作者 |
|------|----------|------|
| 2025-11-30 | 初始创建 | SM |